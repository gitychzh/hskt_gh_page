"use strict";(self.webpackChunkAutox_ozobi_Docs=self.webpackChunkAutox_ozobi_Docs||[]).push([["2040"],{3592:function(e,r,s){s.r(r),s.d(r,{default:()=>t});var a=s(5893),n=s(65);function d(e){let r=Object.assign({h1:"h1",a:"a",div:"div",p:"p",code:"code",h2:"h2",ul:"ul",li:"li",pre:"pre"},(0,n.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.h1,{id:"threads",children:["Threads",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#threads",children:"#"})]}),"\n",(0,a.jsxs)(r.div,{className:"rspress-directive danger",children:[(0,a.jsx)(r.div,{className:"rspress-directive-title",children:"稳定性: 实验"}),(0,a.jsx)(r.div,{className:"rspress-directive-content",children:"\n"})]}),"\n",(0,a.jsx)(r.p,{children:"Threads 模块提供了多线程支持，可以启动新线程来运行脚本。"}),"\n",(0,a.jsxs)(r.p,{children:["脚本主线程会等待所有子线程执行完成后才停止执行，因此如果子线程中有死循环，请在必要的时候调用",(0,a.jsx)(r.code,{children:"exit()"}),"来直接停止脚本或",(0,a.jsx)(r.code,{children:"threads.shutDownAll()"}),"来停止所有子线程。"]}),"\n",(0,a.jsxs)(r.p,{children:["通过",(0,a.jsx)(r.code,{children:"threads.start()"}),"启动的所有线程会在脚本被强制停止时自动停止。"]}),"\n",(0,a.jsx)(r.p,{children:"由于 JavaScript 自身没有多线程的支持，因此您可能会遇到意料之外的问题。"}),"\n",(0,a.jsxs)(r.h1,{id:"threads-1",children:["threads",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#threads-1",children:"#"})]}),"\n",(0,a.jsxs)(r.h2,{id:"threadsstartaction",children:["threads.start(action)",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#threadsstartaction",children:"#"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"action"})," {Function} 要在新线程执行的函数"]}),"\n",(0,a.jsxs)(r.li,{children:["返回 ",(0,a.jsx)(r.a,{href:"#thread",children:"Thread"})]}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"启动一个新线程并执行 action。"}),"\n",(0,a.jsx)(r.p,{children:"例如:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'threads.start(function () {\n    //在新线程执行的代码\n    while (true) {\n        log("子线程");\n    }\n});\nwhile (true) {\n    log("脚本主线程");\n}\n'})}),"\n",(0,a.jsxs)(r.p,{children:["通过该函数返回的",(0,a.jsx)(r.a,{href:"#thread",children:"Thread"}),"对象可以获取该线程的状态，控制该线程的运行中。例如:"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'var thread = threads.start(function () {\n    while (true) {\n        log("子线程");\n    }\n});\n//停止线程执行\nthread.interrupt();\n'})}),"\n",(0,a.jsxs)(r.p,{children:["更多信息参见",(0,a.jsx)(r.a,{href:"#thread",children:"Thread"}),"。"]}),"\n",(0,a.jsxs)(r.h2,{id:"threadsshutdownall",children:["threads.shutDownAll()",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#threadsshutdownall",children:"#"})]}),"\n",(0,a.jsxs)(r.p,{children:["停止所有通过",(0,a.jsx)(r.code,{children:"threads.start()"}),"启动的子线程。"]}),"\n",(0,a.jsxs)(r.h2,{id:"threadscurrentthread",children:["threads.currentThread()",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#threadscurrentthread",children:"#"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["返回 ",(0,a.jsx)(r.a,{href:"#thread",children:"Thread"})]}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"返回当前线程。"}),"\n",(0,a.jsxs)(r.h2,{id:"threadsdisposable",children:["threads.disposable()",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#threadsdisposable",children:"#"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["返回 ",(0,a.jsx)(r.a,{href:"#disposable",children:"Disposable"})]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["新建一个 Disposable 对象，用于等待另一个线程的某个一次性结果。更多信息参见",(0,a.jsx)(r.a,{href:"#%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1",children:"线程通信"}),"以及",(0,a.jsx)(r.a,{href:"#disposable",children:"Disposable"}),"。"]}),"\n",(0,a.jsxs)(r.h2,{id:"threadsatomicinitialvalue",children:["threads.atomic([initialValue])",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#threadsatomicinitialvalue",children:"#"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"initialValue"})," {number} 初始整数值，默认为 0"]}),"\n",(0,a.jsxs)(r.li,{children:["返回",(0,a.jsx)(r.a,{href:"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html",target:"_blank",rel:"noopener noreferrer",children:"AtomicLong"})]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["新建一个整数原子变量。更多信息参见",(0,a.jsx)(r.a,{href:"#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8",children:"线程安全"}),"以及",(0,a.jsx)(r.a,{href:"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html",target:"_blank",rel:"noopener noreferrer",children:"AtomicLong"}),"。"]}),"\n",(0,a.jsxs)(r.h2,{id:"threadslock",children:["threads.lock()",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#threadslock",children:"#"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["返回",(0,a.jsx)(r.a,{href:"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html",target:"_blank",rel:"noopener noreferrer",children:"ReentrantLock"})]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["新建一个可重入锁。更多信息参见",(0,a.jsx)(r.a,{href:"#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8",children:"线程安全"}),"以及",(0,a.jsx)(r.a,{href:"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html",target:"_blank",rel:"noopener noreferrer",children:"ReentrantLock"}),"。"]})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,n.ah)(),e.components);return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}let t=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["doc%2Fadvanced%2Fthreads%2Fthreads.md"]={toc:[{text:"threads.start(action)",id:"threadsstartaction",depth:2},{text:"threads.shutDownAll()",id:"threadsshutdownall",depth:2},{text:"threads.currentThread()",id:"threadscurrentthread",depth:2},{text:"threads.disposable()",id:"threadsdisposable",depth:2},{text:"threads.atomic([initialValue])",id:"threadsatomicinitialvalue",depth:2},{text:"threads.lock()",id:"threadslock",depth:2}],title:"threads",headingTitle:"threads",frontmatter:{}}}}]);