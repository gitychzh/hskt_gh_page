"use strict";(self.webpackChunkAutox_ozobi_Docs=self.webpackChunkAutox_ozobi_Docs||[]).push([["1843"],{1637:function(e,n,l){l.r(n),l.d(n,{default:()=>o});var s=l(5893),a=l(65);function i(e){let n=Object.assign({h1:"h1",a:"a",p:"p",pre:"pre",code:"code",h2:"h2",strong:"strong",ul:"ul",li:"li"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"floaty",children:["Floaty",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#floaty",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"floaty 模块提供了悬浮窗的相关函数，可以在屏幕上显示自定义悬浮窗，控制悬浮窗大小、位置等。"}),"\n",(0,s.jsx)(n.p,{children:"悬浮窗在脚本停止运行时会自动关闭，因此，要保持悬浮窗不被关闭，可以用一个空的 setInterval 来实现，例如："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"setInterval(() => {}, 1000);\n"})}),"\n",(0,s.jsxs)(n.h1,{id:"floaty-1",children:["Floaty",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#floaty-1",children:"#"})]}),"\n",(0,s.jsxs)(n.h2,{id:"floatycheckpermission",children:["floaty.checkPermission()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#floatycheckpermission",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"[4.2.17 新增]"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"返回 {boolean}"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"返回当前应用是否有悬浮窗权限。（不会触发请求权限操作）"}),"\n",(0,s.jsxs)(n.h2,{id:"floatyrequestpermission",children:["floaty.requestPermission()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#floatyrequestpermission",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"[4.2.17 新增]"})}),"\n",(0,s.jsx)(n.p,{children:"跳转到系统的悬浮窗权限请求界面。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'if (!floaty.checkPermission()) {\n    // 没有悬浮窗权限，提示用户并跳转请求\n    toast("本脚本需要悬浮窗权限来显示悬浮窗，请在随后的界面中允许并重新运行本脚本。");\n    floaty.requestPermission();\n    exit();\n} else {\n    toastLog("已有悬浮窗权限");\n}\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"floatywindowlayout",children:["floaty.window(layout)",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#floatywindowlayout",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"layout"})," {xml} | {View} 悬浮窗界面的 XML 或者 View"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["指定悬浮窗的布局，创建并",(0,s.jsx)(n.strong,{children:"显示"}),"一个悬浮窗，返回一个",(0,s.jsx)(n.a,{href:"#floatywindow",children:"FloatyWindow"}),"对象。"]}),"\n",(0,s.jsxs)(n.p,{children:["该悬浮窗自带关闭、调整大小、调整位置按键，可根据需要调用",(0,s.jsx)(n.code,{children:"setAdjustEnabled()"}),"函数来显示或隐藏。"]}),"\n",(0,s.jsx)(n.p,{children:"其中 layout 参数可以是 xml 布局或者一个 View，更多信息参见 ui 模块的说明。"}),"\n",(0,s.jsx)(n.p,{children:"例子："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var w = floaty.window(\n    <frame gravity="center">\n        <text id="text">悬浮文字</text>\n    </frame>\n);\nsetTimeout(() => {\n    w.close();\n}, 2000);\n'})}),"\n",(0,s.jsx)(n.p,{children:"这段代码运行后将会在屏幕上显示悬浮文字，并在两秒后消失。"}),"\n",(0,s.jsxs)(n.p,{children:["另外，因为脚本运行的线程不是 UI 线程，而所有对控件的修改操作需要在 UI 线程执行，此时需要用",(0,s.jsx)(n.code,{children:"ui.run"}),"，例如:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'ui.run(function () {\n    w.text.setText("文本");\n});\n'})}),"\n",(0,s.jsxs)(n.p,{children:["有关返回的",(0,s.jsx)(n.code,{children:"FloatyWindow"}),"对象的说明，参见下面的",(0,s.jsx)(n.code,{children:"FloatyWindow"}),"章节。"]}),"\n",(0,s.jsxs)(n.h2,{id:"floatyrawwindowlayout",children:["floaty.rawWindow(layout)",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#floatyrawwindowlayout",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"layout"})," {xml} | {View} 悬浮窗界面的 XML 或者 View"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["指定悬浮窗的布局，创建并",(0,s.jsx)(n.strong,{children:"显示"}),"一个原始悬浮窗，返回一个",(0,s.jsx)(n.a,{href:"#floatyrawwindow",children:"FloatyRawWindow"}),"对象。"]}),"\n",(0,s.jsxs)(n.p,{children:["与",(0,s.jsx)(n.code,{children:"floaty.window()"}),"函数不同的是，该悬浮窗不会增加任何额外设施（例如调整大小、位置按钮），您可以根据自己需要编写任何布局。"]}),"\n",(0,s.jsx)(n.p,{children:"而且，该悬浮窗支持完全全屏，可以覆盖状态栏，因此可以做护眼模式之类的应用。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var w = floaty.rawWindow(\n    <frame gravity="center">\n        <text id="text">悬浮文字</text>\n    </frame>\n);\n\nw.setPosition(500, 500);\n\nsetTimeout(() => {\n    w.close();\n}, 2000);\n'})}),"\n",(0,s.jsx)(n.p,{children:"这段代码运行后将会在屏幕上显示悬浮文字，并在两秒后消失。"}),"\n",(0,s.jsxs)(n.p,{children:["有关返回的",(0,s.jsx)(n.code,{children:"FloatyRawWindow"}),"对象的说明，参见下面的",(0,s.jsx)(n.code,{children:"FloatyRawWindow"}),"章节。"]}),"\n",(0,s.jsxs)(n.h2,{id:"floatycloseall",children:["floaty.closeAll()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#floatycloseall",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"关闭所有本脚本的悬浮窗。"})]})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}let o=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["doc%2Fadvanced%2Ffloaty%2Ffloaty.md"]={toc:[{text:"floaty.checkPermission()",id:"floatycheckpermission",depth:2},{text:"floaty.requestPermission()",id:"floatyrequestpermission",depth:2},{text:"floaty.window(layout)",id:"floatywindowlayout",depth:2},{text:"floaty.rawWindow(layout)",id:"floatyrawwindowlayout",depth:2},{text:"floaty.closeAll()",id:"floatycloseall",depth:2}],title:"Floaty",headingTitle:"Floaty",frontmatter:{}}}}]);