"use strict";(self.webpackChunkAutox_ozobi_Docs=self.webpackChunkAutox_ozobi_Docs||[]).push([["4926"],{8669:function(e,i,s){s.r(i),s.d(i,{default:()=>r});var n=s(5893),d=s(65);function a(e){let i=Object.assign({h1:"h1",a:"a",div:"div",p:"p",code:"code",pre:"pre",h2:"h2",ul:"ul",li:"li"},(0,d.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.h1,{id:"media",children:["Media",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#media",children:"#"})]}),"\n",(0,n.jsxs)(i.div,{className:"rspress-directive tip",children:[(0,n.jsx)(i.div,{className:"rspress-directive-title",children:"稳定性: 稳定"}),(0,n.jsx)(i.div,{className:"rspress-directive-content",children:"\n"})]}),"\n",(0,n.jsx)(i.p,{children:"media 模块提供多媒体编程的支持。目前仅支持音乐播放和媒体文件扫描。后续会结合 UI 加入视频播放等功能。"}),"\n",(0,n.jsxs)(i.p,{children:["需要注意是，使用该模块播放音乐时是在后台异步播放的，在脚本结束后会自动结束播放，因此可能需要插入诸如",(0,n.jsx)(i.code,{children:"sleep()"}),"的语句来使脚本保持运行。例如："]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-js",children:'//播放音乐\nmedia.playMusic("/sdcard/1.mp3");\n//让音乐播放完\nsleep(media.getMusicDuration());\n'})}),"\n",(0,n.jsxs)(i.h2,{id:"mediascanfilepath",children:["media.scanFile(path)",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#mediascanfilepath",children:"#"})]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"path"})," {string} 媒体文件路径"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"扫描路径 path 的媒体文件，将它加入媒体库中；或者如果该文件以及被删除，则通知媒体库移除该文件。"}),"\n",(0,n.jsx)(i.p,{children:"媒体库包括相册、音乐库等，因此该函数可以用于把某个图片文件加入相册。"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-js",children:'//请求截图\nrequestScreenCapture(false);\n//截图\nvar im = captureScreen();\nvar path = "/sdcard/screenshot.png";\n//保存图片\nim.saveTo(path);\n//把图片加入相册\nmedia.scanFile(path);\n'})}),"\n",(0,n.jsxs)(i.h2,{id:"mediaplaymusicpath-volume-looping",children:["media.playMusic(path[, volume, looping])",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#mediaplaymusicpath-volume-looping",children:"#"})]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"path"})," {string} 音乐文件路径"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"volume"})," {number} 播放音量，为 0~1 的浮点数，默认为 1"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"looping"})," {boolean} 是否循环播放，如果 looping 为",(0,n.jsx)(i.code,{children:"true"}),"则循环播放，默认为",(0,n.jsx)(i.code,{children:"false"})]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["播放音乐文件 path。该函数不会显示任何音乐播放界面。如果文件不存在或者文件不是受支持的音乐格式，则抛出",(0,n.jsx)(i.code,{children:"UncheckedIOException"}),"异常。"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-js",children:'//播放音乐\nmedia.playMusic("/sdcard/1.mp3");\n//让音乐播放完\nsleep(media.getMusicDuration());\n'})}),"\n",(0,n.jsx)(i.p,{children:"如果要循环播放音乐，则使用 looping 参数："}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:'```js\n//传递第三个参数为true以循环播放音乐\nmedia.playMusic("/sdcard/1.mp3", 1, true);\n//等待三次播放的时间\nsleep(media.getMusicDuration() * 3);\n'})}),"\n",(0,n.jsxs)(i.p,{children:["如果要使用音乐播放器播放音乐，调用",(0,n.jsx)(i.code,{children:"app.viewFile(path)"}),"函数。"]}),"\n",(0,n.jsxs)(i.h2,{id:"mediamusicseektomsec",children:["media.musicSeekTo(msec)",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#mediamusicseektomsec",children:"#"})]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"msec"})," {number} 毫秒数，表示音乐进度"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"把当前播放进度调整到时间 msec 的位置。如果当前没有在播放音乐，则调用函数没有任何效果。"}),"\n",(0,n.jsxs)(i.p,{children:["例如，要把音乐调到 1 分钟的位置，为",(0,n.jsx)(i.code,{children:"media.musicSeekTo(60 * 1000)"}),"。"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-js",children:'//播放音乐\nmedia.playMusic("/sdcard/1.mp3");\n//调整到30秒的位置\nmedia.musicSeekTo(30 * 1000);\n//等待音乐播放完成\nsleep(media.getMusicDuration() - 30 * 1000);\n'})}),"\n",(0,n.jsxs)(i.h2,{id:"mediapausemusic",children:["media.pauseMusic()",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#mediapausemusic",children:"#"})]}),"\n",(0,n.jsx)(i.p,{children:"暂停音乐播放。如果当前没有在播放音乐，则调用函数没有任何效果。"}),"\n",(0,n.jsxs)(i.h2,{id:"mediaresumemusic",children:["media.resumeMusic()",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#mediaresumemusic",children:"#"})]}),"\n",(0,n.jsx)(i.p,{children:"继续音乐播放。如果当前没有播放过音乐，则调用该函数没有任何效果。"}),"\n",(0,n.jsxs)(i.h2,{id:"mediastopmusic",children:["media.stopMusic()",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#mediastopmusic",children:"#"})]}),"\n",(0,n.jsx)(i.p,{children:"停止音乐播放。如果当前没有在播放音乐，则调用函数没有任何效果。"}),"\n",(0,n.jsxs)(i.h2,{id:"mediaismusicplaying",children:["media.isMusicPlaying()",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#mediaismusicplaying",children:"#"})]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"返回 {boolean}"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"返回当前是否正在播放音乐。"}),"\n",(0,n.jsxs)(i.h2,{id:"mediagetmusicduration",children:["media.getMusicDuration()",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#mediagetmusicduration",children:"#"})]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"返回 {number}"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"返回当前音乐的时长。单位毫秒。"}),"\n",(0,n.jsxs)(i.h2,{id:"mediagetmusiccurrentposition",children:["media.getMusicCurrentPosition()",(0,n.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#mediagetmusiccurrentposition",children:"#"})]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"返回 {number}"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"返回当前音乐的播放进度(已经播放的时间)，单位毫秒。"})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:i}=Object.assign({},(0,d.ah)(),e.components);return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}let r=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["doc%2Fadvanced%2Fmedia.md"]={toc:[{text:"media.scanFile(path)",id:"mediascanfilepath",depth:2},{text:"media.playMusic(path[, volume, looping])",id:"mediaplaymusicpath-volume-looping",depth:2},{text:"media.musicSeekTo(msec)",id:"mediamusicseektomsec",depth:2},{text:"media.pauseMusic()",id:"mediapausemusic",depth:2},{text:"media.resumeMusic()",id:"mediaresumemusic",depth:2},{text:"media.stopMusic()",id:"mediastopmusic",depth:2},{text:"media.isMusicPlaying()",id:"mediaismusicplaying",depth:2},{text:"media.getMusicDuration()",id:"mediagetmusicduration",depth:2},{text:"media.getMusicCurrentPosition()",id:"mediagetmusiccurrentposition",depth:2}],title:"Media",headingTitle:"Media",frontmatter:{}}}}]);